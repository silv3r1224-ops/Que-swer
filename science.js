const data = {
  "2023": {
    "Semester 1": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 2": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 3": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 4": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 5": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 6": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ]
  },
  "2024": {
    "Semester 1": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 2": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 3": [
      { name: "Chemestry", folder: "NEHU/NEP/sem3/2024/BSC/chem/chem1.jpg" },
      { name: "Mathematics", folder: "NEHU/NEP/sem3/2024/BSC/maths" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 4": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 5": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 6": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ]
  },
  "2025": {
    "Semester 1": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 2": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 3": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 4": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 5": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ],
    "Semester 6": [
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 1", folder: "papers/2023/science/sem1/q1" },
      { name: "Question Paper 2", folder: "papers/2023/science/sem1/q2" }
    ]
  }
};

let currentYear = null;

const title = document.getElementById('step-title');
const options = document.getElementById('options');
const paperView = document.getElementById('paper-view');
const backBtn = document.getElementById('back-btn');

function showBack(action, isHome=false) {
  if (isHome) {
    backBtn.innerHTML = `<a href="index.html" class="btn">⬅ Home</a>`;
  } else {
    backBtn.innerHTML = `<button class="btn" onclick="${action}">⬅ Back</button>`;
  }
}

function loadYears() {
  title.textContent = "Select Year";
  options.innerHTML = "";
  paperView.innerHTML = "";
  showBack("", true); // back to home
  Object.keys(data).forEach(year => {
    createCard(year, () => {
      currentYear = year;
      loadSemesters(year);
    });
  });
}

function loadSemesters(year) {
  title.textContent = `Select Semester (${year})`;
  options.innerHTML = "";
  paperView.innerHTML = "";
  Object.keys(data[year]).forEach(sem => {
    createCard(sem, () => {
      loadPapers(year, sem);
    });
  });
  showBack("loadYears()");
}

function loadPapers(year, semester) {
  title.textContent = `${semester} Papers (${year})`;
  options.innerHTML = "";
  paperView.innerHTML = "";
  const papers = data[year][semester];

  papers.forEach(paper => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `<h3>${paper.name}</h3>`;
    div.onclick = () => loadPaperPages(year, semester, paper);
    options.appendChild(div);
  });

  showBack(`loadSemesters('${year}')`);
}

function loadPaperPages(year, semester, paper) {
  title.textContent = `${paper.name} (${semester}, ${year})`;
  options.innerHTML = "";
  paperView.innerHTML = "";

  // load first 10 pages (you can increase limit)
  for (let i = 1; i <= 10; i++) {
    let imgPath = `${paper.folder}/${i}.jpg`;
    let img = document.createElement("img");
    img.src = imgPath;
    img.onerror = function () {
      this.remove(); // stop if image doesn't exist
    };
    paperView.appendChild(img);
  }

  showBack(`loadPapers('${year}','${semester}')`);
}

function createCard(label, action) {
  const card = document.createElement('div');
  card.className = "card";
  card.textContent = label;
  card.onclick = action;
  options.appendChild(card);
}

// start from years
loadYears();
